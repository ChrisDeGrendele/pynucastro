

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating networks &mdash; pynucastro 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pynucastro 1.0 documentation" href="index.html"/>
        <link rel="next" title="pynucastro" href="modules.html"/>
        <link rel="prev" title="pynucastro usage examples" href="pynucastro-examples.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pynucastro
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Overview of <code class="docutils literal"><span class="pre">pynucastro</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="pynucastro-examples.html"><code class="docutils literal"><span class="pre">pynucastro</span></code> usage examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#all-networks">All networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-network">Python network</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standalone-fortran-network">Standalone Fortran network</a></li>
<li class="toctree-l2"><a class="reference internal" href="#starkiller-microphysics-network">StarKiller Microphysics network</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tabular-rates">Tabular Rates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pynucastro</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Creating networks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/networks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="creating-networks">
<h1>Creating networks<a class="headerlink" href="#creating-networks" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">pynucastro</span></code> can output the righthand side functions for ODE integration
in Python and Fortran.</p>
<p>For Fortran code generation, <code class="docutils literal"><span class="pre">pynucastro</span></code> offers two options.</p>
<ul class="simple">
<li>Standalone: Generate right hand side routines and an integration
driver program using the included VODE integrator in
<code class="docutils literal"><span class="pre">util/VODE/</span></code>. These networks implement only species and energy
integration at constant temperature, as <code class="docutils literal"><span class="pre">pynucastro</span></code> does not include
an equation of state.</li>
<li>Microphysics: Generate network files to copy directly into the
<a class="reference external" href="https://github.com/StarKiller-astro/Microphysics/">StarKiller Microphysics repository</a> for use with astrophysical
simulation codes. These networks implement species, temperature, and
energy integration.</li>
</ul>
<div class="section" id="all-networks">
<h2>All networks<a class="headerlink" href="#all-networks" title="Permalink to this headline">¶</a></h2>
<p>The first few steps to setting up any of the available network options
are as follows. See the following section for details about the
particular kind of network you are interested in creating.</p>
<ul>
<li><p class="first">Create a working directory for you network (this does not have to
be in the <code class="docutils literal"><span class="pre">pynucastro/</span></code> directory tree).</p>
</li>
<li><p class="first">Obtain Reaclib rate files (in Reaclib 1 format) for your problem and
either place them in your working directory or <code class="docutils literal"><span class="pre">pynucastro/library</span></code>.</p>
<p>You can find the rates that are already provided in the library by
doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pynucastro</span><span class="o">.</span><span class="n">list_known_rates</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a short python script to generate your network,
e.g. <code class="docutils literal"><span class="pre">mynet.py</span></code>, based on the following example scripts:</p>
<ul class="simple">
<li>For Python networks, <code class="docutils literal"><span class="pre">examples/CNO/cno.py</span></code></li>
<li>For standalone Fortran networks, <code class="docutils literal"><span class="pre">examples/urca-23_f90/urca.py</span></code></li>
<li>For StarKiller Microphysics networks, <code class="docutils literal"><span class="pre">examples/urca-23_starkiller/urca.py</span></code></li>
</ul>
</li>
<li><p class="first">Run your python script (<code class="docutils literal"><span class="pre">pynucastro</span></code> must be in your PYTHONPATH).</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python mynet.py
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="python-network">
<h2>Python network<a class="headerlink" href="#python-network" title="Permalink to this headline">¶</a></h2>
<p>First follow the steps above for all networks. To integrate a Python
network using the SciPy integration routines, customize
<code class="docutils literal"><span class="pre">examples/CNO/burn.py</span></code> to initialize and run your network using the
right hand side module you generated above.</p>
</div>
<div class="section" id="standalone-fortran-network">
<h2>Standalone Fortran network<a class="headerlink" href="#standalone-fortran-network" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">examples/urca-23_f90</span></code> example builds a Fortran 90 network together with a
GNU Makefile and integration driver program using the included VODE
package for ODE integration.</p>
<ul>
<li><p class="first">In the steps for all networks above, <code class="docutils literal"><span class="pre">pynucastro</span></code> will create several
Fortran 90 files as well as a GNU Makefile set up to compile the
integrator using gfortran. So next do:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ make
</pre></div>
</div>
</li>
<li><p class="first">Edit the generated <code class="docutils literal"><span class="pre">inputs_integration</span></code> file to specify your initial
conditions as well as integration tolerances, stop time, and output
sampling interval.</p>
</li>
<li><p class="first">Run the integrator as:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./main.Linux.gfortran.exe inputs_integration
</pre></div>
</div>
</li>
<li><p class="first">The integration results will be stored in a text file named by
default <code class="docutils literal"><span class="pre">integration_history.dat</span></code></p>
</li>
</ul>
</div>
<div class="section" id="starkiller-microphysics-network">
<h2>StarKiller Microphysics network<a class="headerlink" href="#starkiller-microphysics-network" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">examples/urca-23_starkiller</span></code> example builds the right hand side, Jacobian,
and helper Fortran modules to copy into the <code class="docutils literal"><span class="pre">networks/</span></code> subdirectory
of the StarKiller Microphysics repository.</p>
<p>No additional customization is required after running the steps for
all networks above.</p>
</div>
<div class="section" id="tabular-rates">
<h2>Tabular Rates<a class="headerlink" href="#tabular-rates" title="Permalink to this headline">¶</a></h2>
<p>Tabular rates for reactions of the form <span class="math">\(\rm{A \rightarrow B}\)</span>
are supported by the standalone Fortran and StarKiller Microphysics
network outputs.</p>
<p>If you would like to include tabular rates, for now they must be in
the form of, e.g. <code class="docutils literal"><span class="pre">23Na-23Ne_electroncapture.dat</span></code> in
<code class="docutils literal"><span class="pre">examples/urca-23_f90</span></code>, indexed by the product of density and
electron fraction <span class="math">\(\rm{\rho Y_e}\)</span> and temperature
<span class="math">\(\rm{T}\)</span>, with the same number and order of variables.</p>
<p>To generate a network with a tabular rate, prepare a rate file to
describe how to read the table as below and then list it as you would
a Reaclib rate file in your network generation script. For example,
<code class="docutils literal"><span class="pre">examples/urca-23_f90/na23--ne23-toki</span></code> demonstrates the following
format:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>t
[parent nuclide]  [daughter nuclide]
[rate table file name]
[number of header lines to eat before the first line of data]
[number of density*ye values]
[number of temperature values]
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="pynucastro" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pynucastro-examples.html" class="btn btn-neutral" title="pynucastro usage examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Michael Zingale and Donald Willcox.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>